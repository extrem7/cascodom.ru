'use strict';let formSended = false;function jsonPost(json) {    return Object.keys(json).map(function (k) {        return encodeURIComponent(k) + '=' + encodeURIComponent(json[k])    }).join('&')}function sendForm(e = null, subject = 0) {    if (e) {        e.preventDefault();    }    const form = document.forms.namedItem("cascoForm"),        name = form.name.value,        email = form.email.value,        phone = form.phone.value;    if (phone) {        let data = {            action: 'casco',            subject,            name,            email,            phone        };        data = jsonPost(data);        axios.post(adminAjax, data)            .then(() => {                formSended = true;                $('#order').modal('hide');                if (subject !== 1) {                    setTimeout(() => {                        $('#thanks').modal('show');                        setTimeout(() => $('#thanks').modal('hide'), 5000);                    }, 300);                }            });    }}var MobileMenu = {    toggleMenuMobile: function toggleMenuMobile() {        $('.mobile-btn').toggleClass('open');        $('.menu-container, body').toggleClass('open-menu');    },    controller: function controller() {        var _this = this;        $("#mobile-menu").click(function () {            _this.toggleMenuMobile();        });    }};$(document).ready(function () {    $('.phone').inputmask("mask", {"mask": "+7 (999) 999-99-99", "clearIncomplete": true});    MobileMenu.controller();    $('#order-polis').modal({backdrop: 'static', keyboard: false});    $(".list-town li").click(function () {        let town = $(this).attr('data-town');        $('.address-info').find('.active').fadeOut(400, function () {            $(this).removeClass('active');            $('.address-info').find('div[data-town=' + town + ']').addClass('active').fadeIn(400);        });    });    $('#geoapi select').change(function () {        $(this).closest('form').submit();    });    if (!$('body').hasClass('home') && !$('body').hasClass('single-car')) {        $('.preloader-wrapper').fadeOut();    }    if ($('body').hasClass('page-template-catalog')) {        $('#cascoForm').submit(function (e) {            sendForm(e);        });        window.onbeforeunload = () => {            if (!formSended) sendForm(null, 1);        };    }});